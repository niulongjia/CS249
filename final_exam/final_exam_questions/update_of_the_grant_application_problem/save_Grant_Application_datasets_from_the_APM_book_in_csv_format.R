
load("grantData.RData")   #  the Grant Application data bundle generated by "CreateGrantData.R"

#---------------------------------------------------------------------------------------------------
#        save the training and testing data used in the [APM] text
#---------------------------------------------------------------------------------------------------

save.csv <- function(Data,Filename) write.csv( Data, file=Filename, quote=FALSE, row.names=FALSE )

save.csv( training, "APM_training.csv" )   #  the training set used in [APM] for Grant Application data
save.csv( testing,  "APM_testing.csv"  )   #  the testing  set used in [APM] for Grant Application data


#---------------------------------------------------------------------------------------------------
#        save Grant Application data subsets used in Chapter 12 of the [APM] text
#---------------------------------------------------------------------------------------------------

pre2008Data  <- training[ pre2008, ]     #  pre2008 is a list of ids saved in  grantData.RData 
year2008Data <- rbind(training[-pre2008,], testing)

library(caret)

set.seed(552)

test2008 <- createDataPartition(year2008Data$Class, p = .25)[[1]]
allData <- rbind(pre2008Data, year2008Data[-test2008,])
holdout2008 <- year2008Data[test2008,]

save.csv( pre2008Data,  "pre2008Data.csv"  )
save.csv( year2008Data, "year2008Data.csv" )
save.csv( test2008,     "test2008.csv"     )
save.csv( holdout2008,  "holdout2008.csv"  )
save.csv( allData,      "allData.csv"      )
